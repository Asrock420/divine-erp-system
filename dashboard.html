<!DOCTYPE html>
<html>
<head>
  <title>Divine ERP Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="layout">

  <div class="sidebar">
    <h2>Divine ERP</h2>
    <ul>
      <li onclick="showDashboard()">Dashboard</li>
      <li onclick="showLeads()">Leads</li>
    </ul>
    <button onclick="logout()">Logout</button>
  </div>

  <div class="main">

    <div id="dashboardSection">
      <h1>Dashboard</h1>
      <p id="userInfo"></p>
      <div class="card">
        <h3>Welcome</h3>
        <p>This is your Real Estate ERP Control Panel.</p>
      </div>
    </div>

    <div id="leadSection" style="display:none;">

      <h1>Leads Module</h1>

      <div class="card">
        <h3>Add New Lead</h3>

        <input type="text" id="client_name" placeholder="Client Name">
        <input type="text" id="phone" placeholder="Phone">
        <input type="text" id="project" placeholder="Project Name">
        <input type="text" id="unit_type" placeholder="Unit Type">
        <input type="number" id="budget" placeholder="Budget">
        <input type="text" id="source" placeholder="Lead Source">
        <input type="date" id="follow_up_date">
        <textarea id="remarks" placeholder="Remarks"></textarea>

        <button onclick="addLead()">Save Lead</button>
      </div>

      <div class="card">
        <h3>Lead List</h3>
        <table border="1" width="100%">
          <thead>
            <tr>
              <th>Name</th>
              <th>Phone</th>
              <th>Project</th>
              <th>Status</th>
              <th>Assigned</th>
            </tr>
          </thead>
          <tbody id="leadTable"></tbody>
        </table>
      </div>

    </div>

  </div>
</div>

<script src="app.js"></script>
<script>

const user = JSON.parse(sessionStorage.getItem("user"));
if(!user){ window.location.href = "index.html"; }

document.getElementById("userInfo").innerText =
  "Logged in as: " + user.name + " (" + user.role + ")";

function logout(){
  sessionStorage.clear();
  window.location.href = "index.html";
}

function showDashboard(){
  document.getElementById("dashboardSection").style.display = "block";
  document.getElementById("leadSection").style.display = "none";
}

function showLeads(){
  document.getElementById("dashboardSection").style.display = "none";
  document.getElementById("leadSection").style.display = "block";
  loadLeads();
}

</script>

</body>
</html>